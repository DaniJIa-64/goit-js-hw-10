{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport { Ukrainian } from 'flatpickr/dist/l10n/uk.js';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet userSelectedDate = null;\n\nconst timeSec = document.querySelector('.value[data-seconds]');\nconst timeMin = document.querySelector('.value[data-minutes]');\nconst timeHour = document.querySelector('.value[data-hours]');\nconst timeDay = document.querySelector('.value[data-days]');\nconst input = document.querySelector('#datetime-picker');\nconst btnStart = document.querySelector('button[data-start]');\nbtnStart.disabled = true;\n\nbtnStart.addEventListener('click', start);\n\nfunction start(e) {\n  if (btnStart.disabled) {\n    return;\n  }\n  btnStart.disabled = true;\n  input.disabled = true;\n  const timerId = setInterval(() => {\n    const currentTime = Date.now();\n    const deltaTime = userSelectedDate.getTime() - currentTime;\n    const time = convertMs(deltaTime);\n    updateClockface(time);\n    if (deltaTime < 1000) {\n      input.disabled = false;\n      clearInterval(timerId);\n    }\n  }, 1000);\n}\n\nfunction updateClockface({ days, hours, minutes, seconds }) {\n  timeDay.innerHTML = `${days}`;\n  timeHour.innerHTML = `${hours}`;\n  timeMin.innerHTML = `${minutes}`;\n  timeSec.innerHTML = `${seconds}`;\n}\n\nconst options = {\n  locale: Ukrainian,\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate <= Date.now()) {\n      iziToast.warning({\n        position: 'topRight',\n        message: 'Please choose a date in the future',\n      });\n      btnStart.disabled = true;\n    } else {\n      btnStart.disabled = false;\n    }\n  },\n};\n\nlet flatpickrDate = new flatpickr('#datetime-picker', options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  const days = addLeadingZero(Math.floor(ms / day));\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  const seconds = addLeadingZero(\n    Math.floor((((ms % day) % hour) % minute) / second)\n  );\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["userSelectedDate","timeSec","timeMin","timeHour","timeDay","input","btnStart","start","timerId","currentTime","deltaTime","time","convertMs","updateClockface","days","hours","minutes","seconds","options","Ukrainian","selectedDates","iziToast","flatpickr","ms","addLeadingZero","value"],"mappings":"iJAOA,IAAIA,EAAmB,KAEvB,MAAMC,EAAU,SAAS,cAAc,sBAAsB,EACvDC,EAAU,SAAS,cAAc,sBAAsB,EACvDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAU,SAAS,cAAc,mBAAmB,EACpDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EAC5DA,EAAS,SAAW,GAEpBA,EAAS,iBAAiB,QAASC,CAAK,EAExC,SAASA,EAAM,EAAG,CAChB,GAAID,EAAS,SACX,OAEFA,EAAS,SAAW,GACpBD,EAAM,SAAW,GACjB,MAAMG,EAAU,YAAY,IAAM,CAChC,MAAMC,EAAc,KAAK,MACnBC,EAAYV,EAAiB,QAAO,EAAKS,EACzCE,EAAOC,EAAUF,CAAS,EAChCG,EAAgBF,CAAI,EAChBD,EAAY,MACdL,EAAM,SAAW,GACjB,cAAcG,CAAO,EAExB,EAAE,GAAI,CACT,CAEA,SAASK,EAAgB,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1Db,EAAQ,UAAY,GAAGU,CAAI,GAC3BX,EAAS,UAAY,GAAGY,CAAK,GAC7Bb,EAAQ,UAAY,GAAGc,CAAO,GAC9Bf,EAAQ,UAAY,GAAGgB,CAAO,EAChC,CAEA,MAAMC,EAAU,CACd,OAAQC,EAAS,UACjB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBpB,EAAmBoB,EAAc,CAAC,EAC9BpB,GAAoB,KAAK,OAC3BqB,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,oCACjB,CAAO,EACDf,EAAS,SAAW,IAEpBA,EAAS,SAAW,EAEvB,CACH,EAEoB,IAAIgB,EAAU,mBAAoBJ,CAAO,EAE7D,SAASN,EAAUW,EAAI,CAKrB,MAAMT,EAAOU,EAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC1CR,EAAQS,EAAe,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EACpDP,EAAUQ,EAAe,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEN,EAAUO,EACd,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CACtD,EACE,MAAO,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASO,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}